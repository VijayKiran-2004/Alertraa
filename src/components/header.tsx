'use client';

import { Settings } from 'lucide-react';
import { cn } from '@/lib/utils';

interface HeaderProps {
  onMenuClick: () => void;
  isDarkMode: boolean;
  healthStatus: string;
}

const AlertraLogo = (props: React.SVGProps<SVGSVGElement>) => (
    <svg width="120" height="28" viewBox="0 0 168 38" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
        <path d="M11.6931 37.5L16.2731 26.62L20.8531 37.5H26.3931L18.4931 22.48L25.6931 7.82H20.1531L16.2731 17.68L12.3931 7.82H6.85312L14.0531 22.48L6.15312 37.5H11.6931Z" fill="currentColor"/>
        <path d="M33.2404 37.8H38.2204V19.9H49.1204V15.2H38.2204V9.9C38.2204 9.16667 38.4871 8.6 39.0204 8.2C39.5537 7.8 40.2371 7.6 41.0704 7.6H49.3204V2.9H42.1204C39.6537 2.9 37.8371 3.51667 36.6704 4.75C35.5037 5.98333 34.9204 7.73333 34.9204 9.9V15.2H30.1204V19.9H34.9204V37.8H33.2404Z" fill="currentColor"/>
        <path d="M57.6975 37.8V3H62.3975V15.2H71.4975V3H76.1975V37.8H71.4975V20.1H62.3975V37.8H57.6975Z" fill="currentColor"/>
        <path d="M80.1221 37.8V3H84.8221V37.8H80.1221Z" fill="currentColor"/>
        <path d="M106.331 26.18V37.8H101.631V25.7C101.631 23.4333 101.198 21.6833 100.331 20.45C99.4644 19.2167 98.2644 18.3 96.7311 17.7C95.1978 17.1 93.4811 16.8 91.5811 16.8C88.9478 16.8 86.8311 17.4333 85.2311 18.7C83.6311 19.9667 82.8311 21.65 82.8311 23.75V37.8H78.1311V11.2H82.8311V13.8C83.5644 12.6333 84.5978 11.7333 85.9311 11.1C87.2644 10.4667 88.8144 10.15 90.5811 10.15C92.9811 10.15 95.0144 10.6833 96.6811 11.75C98.3478 12.8167 99.5978 14.3 100.431 16.2C101.264 18.1 101.681 20.3 101.681 22.8V22.9C102.414 21.5667 103.464 20.5167 104.831 20.05C106.198 19.5833 107.698 19.35 109.331 19.35C111.464 19.35 113.114 19.95 114.281 21.15C115.448 22.35 116.031 23.95 116.031 25.95V37.8H111.331V26.3C111.331 24.8333 111.048 23.7833 110.481 23.15C109.914 22.5167 109.131 22.2 108.131 22.2C107.098 22.2 106.314 22.5333 105.781 23.2C105.248 23.8667 104.981 24.85 104.981 26.15V37.8H100.281V26.18H106.331Z" fill="currentColor"/>
        <path d="M125.845 28.1C125.845 31.5667 125.111 34.1 123.645 35.7C122.178 37.3 120.128 38.1 117.495 38.1C114.395 38.1 111.961 37.25 110.195 35.55C108.428 33.85 107.545 31.5 107.545 28.5V23.4C107.545 20.5333 108.278 18.25 109.745 16.55C111.211 14.85 113.228 14 115.795 14C118.228 14 120.161 14.7 121.595 16.1C123.028 17.5 123.995 19.25 124.495 21.35L119.895 23.15C119.595 22.0833 119.061 21.3 118.295 20.75C117.528 20.2 116.678 19.925 115.745 19.925C114.345 19.925 113.261 20.45 112.495 21.5C111.728 22.55 111.345 23.9333 111.345 25.65V26.6C112.511 25.1333 114.078 24.4 116.045 24.4C118.678 24.4 120.711 25.1167 122.145 26.55C123.578 27.9833 124.295 29.8333 124.295 32.1H115.845C115.911 33.2 116.295 34.0167 117.095 34.55C117.895 35.0833 118.828 35.35 119.895 35.35C121.228 35.35 122.245 34.9333 122.945 34.1C123.645 33.2667 123.995 32.1833 123.995 30.85H125.845V28.1Z" fill="currentColor"/>
        <path d="M149.335 32.55C149.335 34.05 148.918 35.25 148.085 36.15C147.251 37.05 146.135 37.5 144.735 37.5C143.501 37.5 142.485 37.1833 141.685 36.55C140.885 35.9167 140.285 35.0667 139.885 34.0001L143.735 32.4001C143.901 32.8667 144.218 33.2167 144.685 33.45C145.151 33.6833 145.651 33.8 146.185 33.8C146.851 33.8 147.335 33.6333 147.635 33.3C147.935 32.9667 148.085 32.5333 148.085 32C148.085 31.4333 147.918 30.95 147.585 30.55C147.251 30.15 146.751 29.8167 146.085 29.55L143.435 28.55C142.668 28.25 141.935 27.8333 141.235 27.3C140.535 26.7667 140.018 26.0667 139.685 25.2C139.351 24.3333 139.185 23.3667 139.185 22.3C139.185 20.7333 139.635 19.4667 140.535 18.5C141.435 17.5333 142.651 17.05 144.185 17.05C145.818 17.05 147.118 17.5833 148.085 18.65C149.051 19.7167 149.535 21.0667 149.535 22.7L145.685 24.2C145.518 23.4333 145.218 22.8667 144.785 22.5C144.351 22.1333 143.851 21.95 143.285 21.95C142.618 21.95 142.135 22.1333 141.835 22.5C141.535 22.8667 141.385 23.3 141.385 23.8C141.385 24.3333 141.535 24.7833 141.835 25.15C142.135 25.5167 142.568 25.8333 143.135 26.1L146.235 27.25C147.535 27.75 148.518 28.4333 149.185 29.3C149.851 30.1667 150.185 31.2333 150.185 32.5L149.335 32.55Z" fill="currentColor"/>
        <path d="M167.863 17.18C167.329 16.1133 166.496 15.2 165.363 14.44C164.229 13.68 162.913 13.1333 161.413 12.8C159.913 12.4667 158.329 12.3 156.663 12.3C155.229 12.3 153.888 12.45 152.633 12.75C151.379 13.05 150.263 13.4833 149.283 14.05L151.133 17.55C151.799 17.15 152.491 16.85 153.213 16.65C153.934 16.45 154.663 16.35 155.393 16.35C156.463 16.35 157.341 16.5167 158.033 16.85C158.724 17.1833 159.263 17.65 159.643 18.25C160.024 18.85 160.213 19.55 160.213 20.35V20.55C158.446 19.6167 156.688 19.15 154.933 19.15C152.199 19.15 150.054 19.9333 148.493 21.5C146.933 23.0667 146.153 25.1333 146.153 27.7C146.153 29.5 146.499 31.0333 147.193 32.3C147.888 33.5667 148.841 34.5333 150.053 35.2C151.264 35.8667 152.653 36.2 154.213 36.2C156.613 36.2 158.554 35.5333 160.043 34.2C161.533 32.8667 162.279 30.9333 162.279 28.4C162.279 26.5 161.946 24.8333 161.279 23.4C160.613 21.9667 159.696 20.8833 158.533 20.15C160.024 19.65 161.324 19.4 162.433 19.4C163.799 19.4 164.991 19.8 165.993 20.6C167.063 21.4 167.593 22.6667 167.593 24.4V37.8H162.893V24.7C162.893 23.2333 162.426 22.1333 161.493 21.4C160.559 20.6667 159.299 20.3 157.713 20.3C156.779 20.3 155.913 20.4833 155.113 20.85C154.313 21.2167 153.646 21.7833 153.113 22.55C152.579 23.3167 152.279 24.2333 152.213 25.3L152.163 26.2C152.163 26.7333 152.213 27.2333 152.313 27.7C152.413 28.1667 152.546 28.5833 152.713 28.95C153.213 29.95 153.888 30.7333 154.733 31.3C155.579 31.8667 156.554 32.15 157.663 32.15C158.729 32.15 159.654 31.8333 160.433 31.2C161.213 30.5667 161.729 29.7 161.993 28.6L167.863 17.18Z" fill="currentColor"/>
    </svg>
)

export default function Header({ onMenuClick, isDarkMode, healthStatus }: HeaderProps) {
  const themeClasses = isDarkMode
    ? 'bg-[#36454F] text-white border-slate-700'
    : 'bg-white text-slate-900 border-gray-200';
  
  const getStatusColorClass = (status: string) => {
    switch (status) {
      case 'critical':
        return 'bg-red-500';
      case 'warning':
        return 'bg-yellow-500';
      case 'normal':
        return 'bg-emerald-500';
      default:
        return 'bg-gray-400';
    }
  };

  return (
    <header className={cn('p-4 border-b shadow-sm flex items-center justify-between sticky top-0 z-20', themeClasses)}>
      <div className="w-10"></div>
      <div className="flex items-center space-x-2">
        <AlertraLogo className="h-7 text-primary" />
        <div 
          className={cn(
            'w-3 h-3 rounded-full transition-colors',
            getStatusColorClass(healthStatus),
            healthStatus !== 'normal' && 'animate-blink'
          )}
          title={`Health Status: ${healthStatus}`}
        ></div>
      </div>
      <button 
        onClick={onMenuClick}
        className={cn('p-2 rounded-full', isDarkMode ? 'hover:bg-slate-700' : 'hover:bg-gray-200')}
        aria-label="Open settings menu"
      >
        <Settings size={24} />
      </button>
    </header>
  );
}
